name: Create Github release

on: push

env:
  PACKAGE_NAME: utils

jobs:
  create-github-release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Get the latest release
        uses: actions/github-script@v7
        with:
          script: |
            const { PACKAGE_NAME } = process.env
            const { data: releases } = await github.rest.repos.listReleases({
              owner: context.repo.owner,
              repo: context.repo.repo,
              per_page: 1,
            })
            const targetReleases = releases.filter(({ tag_name }) => tag_name.startsWith(PACKAGE_NAME))
            const release = targetReleases[0]
            console.log("Previous release:", release)

